
<!DOCTYPE html>

<!--QUIZ W/ VH -->
<!--Body Doubling w/ VH-->
<!--NO SOUND-->
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Work Sheet with Virtual Human and WebGazer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    
    <style>

    /* SPLIT SCREEN */ 
    body {
        margin: 0;
        padding: 0;
        height: 100vh;
        display: flex;
    }

    .panel {
          
          height: 100%;
          overflow-y: scroll; 
          border: 1px solid #ccc;
          position: relative; 
        }

        .panel-left {
          background-color: #f0f0f0;
          z-index: 5; 
          width: 55%;
        }

        .panel-right {
          background-color: #d0e0f0;
          position: relative;
          z-index: 10; 
          width: 45%;
        }

    button {
        display: block;
        margin-top: 20px;
        padding: 10px 15px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        margin-bottom: 20px;
    }

    button:hover {
        background-color: #45a049;
    }

    .button-container {
        display: flex; 
        justify-content: flex-start; 
        gap: 10px; 
    }

    .text-box {
        border: 2px solid #333; 
        padding: 20px; 
        width: 90%; 
        height: 500px;
        background-color: #f0f0f0; 
        font-family: Arial, sans-serif;
        resize: none; 
        overflow-y: scroll; 
        margin-bottom: 20px;
    }

    .question {
        margin-bottom: 20px;
    }

    .question h3 {
        margin-bottom: 10px;
    }

    

    .char-count {
        margin-top: 10px;
        font-size: 14px;
        color: #555;
    }

   

     /* UNITY CONTAINER */
     #unity-container.unity-desktop {
          width: 100%; 
          height: 100%; 
          position: relative; 
          z-index: 4; 
        }
  
        #unity-canvas {
          width: 100%;
          height: 100%;
          background: #231F20;
          z-index: 4;
        }
  
        #unity-loading-bar {
          position: absolute; 
          left: 50%; 
          top: 50%; 
          transform: translate(-50%, -50%);
          display: none;
          z-index: 4;
        }
  
        #unity-logo { width: 154px; height: 130px; }
        #unity-progress-bar-empty { width: 141px; height: 18px; }
        #unity-progress-bar-full { width: 0%; height: 18px; }
        #unity-footer { position: relative; z-index: 4; }

    </style>
  </head>


  <body>
    <!--OFFSCREEN TO DETECT -->
    <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert@2.1.2/dist/sweetalert.min.js"></script>
    <script src="./js/prediction_point_store.js"></script>
    <!--Start gazetracking -->
    <!-- LEFT SIDE: Unity and Virtual Human -->
    <!-- LEFT SIDE: Unity and Virtual Human -->
    <div class="panel panel-left">
        <div id="unity-container" class="unity-desktop">
          <canvas id="unity-canvas"></canvas>
          <div id="unity-loading-bar">
            <div id="unity-logo"></div>
            <div id="unity-progress-bar-empty">
              <div id="unity-progress-bar-full"></div>
            </div>
          </div>
          <div id="unity-footer"></div>
        </div>
      </div>
  

     <!-- RIGHT SIDE: Worksheet -->
     <div class="panel panel-right">
     
     
        <!-- TOP BUTTONS -->
      <div class="button-container">
        <button onclick="store_points_variable()">Start Storing Points</button>
        <button onclick="stop_storing_points_variable()">Stop Storing Points</button>
      </div>

       <!--The Story-->
       <div class="text-box">

        <h4>The Cursed Stone </h4>
        
        <p> One bright Saturday afternoon, twelve-year-old Jake was helping his grandmother prepare her renowned vegetable soup. The kitchen was filled with the scent of simmering onions, garlic, and fresh herbs. As Jake chopped carrots, his gaze fell upon an unusual object resting on the windowsill—a smooth stone veined with dark, twisted patterns.

          “Grandmother, what is this stone?” Jake asked, picking it up. It was cold to the touch, strangely so for such a warm kitchen.
          
          Grandmother turned, her cheerful expression dimming. “Ah, that stone has been in our family for generations,” she murmured. “They say it can bring out the richest flavors in any soup.”
          
          “Does it really work?” Jake asked, intrigued.
          
          A shadow crossed her face. “So they say. But there are darker tales... whispers of misfortune. I stopped using it long ago.” With that, she left to gather herbs from the garden.
          
          Alone in the kitchen, Jake’s curiosity got the best of him. Ignoring her warning, he tossed the stone into the bubbling pot. The moment it hit the water, the room seemed to dim, a cold breeze chilling the air.
          
          From deep within the pot, a low, mocking whisper echoed, “Ah... at last, I am awakened.”
          
          Jake’s heart skipped a beat. He leaned closer to the pot, eyes wide. “Who’s there?” he whispered.
          
          “Down here, foolish boy,” the voice hissed, smooth yet taunting. “You’ve freed me, and now I shall have my fun.”
          
          Jake’s eyes darted around. “You... you’re the stone?”
          
          The voice chuckled. “Indeed. For years I’ve been bound to that windowsill. But thanks to your curiosity, I am free. And your family... will pay for their secrets.”
          
          Before Jake could respond, the kitchen door creaked open. Grandmother returned, holding fresh herbs. “The soup smells wonderful,” she said with a smile. Jake forced a smile, his heart pounding. What had he done?
          
          Soon, the dining room was filled with the sounds of laughter. Jake’s family gathered around the table as his grandmother served the soup. Jake watched nervously, his pulse quickening as they took their first sips.
          
          “This is divine!” Aunt Linda exclaimed. “It’s never tasted so good!”
          
          But then, Jake noticed something strange. His little sister Emma’s eyes widened. She stood up suddenly. “I... I have to confess!” she blurted, her voice trembling. “I’ve been sneaking cookies from the pantry every night!”
          
          Gasps filled the room. Emma was always the most obedient, yet here she was, confessing secrets unprompted. Jake’s stomach turned with dread.
          
          The stone’s voice slithered into his ear. “Ah, the truth... so delicious, isn’t it? Secrets are the finest spices.”
          
          “What have you done?” Jake hissed, his fists clenched.
          
          “Oh, don’t act so distressed, boy. I’ve merely loosened their tongues. Watch and enjoy,” the stone chuckled.
          
          As if on cue, his cousin Ben burst out, “I wrecked Dad’s car last month and blamed it on our neighbor!”
          
          Jake’s aunt turned red, blurting, “I’ve been hiding your fishing gear, Joe, because I’m tired of your weekend trips!”
          
          The room descended into chaos as confessions spilled uncontrollably. The joyous family dinner turned into a scene of accusations and tears. Jake’s mind raced. He had to stop this madness before it tore his family apart.
          
          But in the midst of the chaos, Jake’s grandmother, who had been silent, suddenly stood up. Her usually calm face was filled with fear. She grasped the edge of the table as if to steady herself.
          
          “No... it’s happening again,” she muttered under her breath, her eyes wild. “We should never have kept it.”
          
          Jake’s heart skipped a beat. “Grandma, what do you mean?”
          
          Her eyes filled with unshed tears. “I thought it was just a legend. I thought we had escaped it.” She turned to the pot, her voice rising in panic. “The stone feeds on secrets—it thrives on tearing families apart. I swore I would never use it again.”
          
          The stone’s laughter echoed through Jake’s mind. “Oh, the dear old woman kept her promise... until you, boy, decided to play chef.”
          
          “Grandma, why didn’t you tell me?” Jake cried, his voice breaking. 
          
          “Because I was afraid!” she admitted. “Afraid it would draw out things best left buried.” Her voice quivered. “But I see now, it’s too late.”
          
          The stone’s voice turned gleeful. “Yes, far too late. Now, let’s see what other secrets lie beneath this family’s polished surface.”
          
          Before Jake could respond, the room seemed to shift. A cold wind blew through, and the lights flickered. The family’s voices became distant, like echoes in a cavern. And then, as if compelled by an invisible force, Jake’s grandmother looked straight at him, her eyes filled with dread.
          
          “Jake,” she whispered, “you’re not who you think you are.”
          
          Jake froze, the color draining from his face. “What... what do you mean?”
          
          The stone’s mocking laughter grew louder. “Yes, boy, ask her about the day you were found on the doorstep. Ask her why she never told you the truth.”
          
          Tears welled in his grandmother’s eyes. “I tried to protect you, Jake,” she whispered. “We found you as a baby on our doorstep... with a note warning us never to let you near the stone.”
          
          Jake’s head spun, his pulse pounding in his ears. “You’re lying!” he shouted. But deep down, he knew it was true. The pieces were falling into place—the strange dreams he’d had, the way he never quite fit in.
          
          The stone’s voice wrapped around him like a cold embrace. “Oh, yes, boy. You are the final piece. You were never meant to be part of this family. You were a curse left to them... by me.”
          
          Jake stumbled back, his mind reeling. The family around him erupted into panicked whispers, but all he could hear was the stone’s laughter, echoing in his ears.
          
          And in that moment, Jake realized the truth: he was connected to the stone in a way that none of them had ever understood. The stone’s curse was not just on his family—it was on *him*.
          
          “Now,” the stone whispered, its voice dripping with malice, “shall we reveal the rest of the secrets? Or are you too afraid to learn what you truly are?”
          
          Jake’s grandmother reached out, but Jake was already backing away, the room spinning around him. The lights flickered once more, plunging them into darkness.
          
          And in that darkness, the stone’s final words echoed in Jake’s mind: “This is only the beginning.”
          
        </p>
        </div>
        
      <form id="quiz-form">
        <div class="question" id="question1">
          <h3>Why did Jake’s grandmother likely hesitate to explain the full history of the stone when he first asked about it?</h3>
          <label><input type="radio" name="q1" value="incorrect"> She believed the stone’s curse would be reactivated if its secrets were spoken aloud</label><br>
          <label><input type="radio" name="q1" value="incorrect"> She was cursed to not reveal its secrets </label><br>
          <label><input type="radio" name="q1" value="correct"> She feared Jake’s curiosity would lead him to use it despite her warnings </label><br>
          <label><input type="radio" name="q1" value="incorrect"> She thought Jake was too young to understand the family’s dark past </label><br>
        </div>

        <div class="question" id="question2">
          <h3>What was the underlying reason the stone fed on secrets during the family dinner?</h3>
          <label><input type="radio" name="q2" value="incorrect"> It needed confessions to gain control over the family’s willpower </label><br>
          <label><input type="radio" name="q2" value="incorrect"> It needed the secrets to transform into a more powerful entity</label><br>
          <label><input type="radio" name="q2" value="incorrect">It was using the secrets to collect enough energy to break free from the house </label><br>
          <label><input type="radio" name="q2" value="correct"> It thrived on the emotional chaos and destruction caused by revealing hidden truths </label><br>
        </div>

        <div class="question" id="question3">
          <h3>Why did the stone focus on taunting Jake specifically after it was activated?</h3>
          <label><input type="radio" name="q3" value="incorrect"> The stone wanted Jake to embrace its power for his own gain </label><br>
          <label><input type="radio" name="q3" value="incorrect"> It knew Jake was the only one who could destroy it </label><br>
          <label><input type="radio" name="q3" value="correct">Jake was connected to the stone in a way that no one else in the family was</label><br>
          <label><input type="radio" name="q3" value="incorrect"> It saw Jake as the weakest link in the family</label><br>
        </div>

        <div class="question" id="question4">
          <h3>What is the significance of the grandmother’s confession about finding Jake as a baby on their doorstep?</h3>
          <label><input type="radio" name="q4" value="correct"> It implies that Jake was deliberately placed in the family to eventually release the stone’s curse </label><br>
          <label><input type="radio" name="q4" value="incorrect">It reveals that Jake is of noble lineage connected to the stone</label><br>
          <label><input type="radio" name="q4" value="incorrect"> It suggests that Jake’s parents were enemies of the family who cursed them </label><br>
          <label><input type="radio" name="q4" value="incorrect"> It explains why Jake never fit in with the family traditions</label><br>
        </div>
        
        <div class="question" id="question5">
          <h3>How does Jake’s decision to throw the stone into the soup reflect his personality?</h3>
          <label><input type="radio" name="q5" value="incorrect"> It shows his disregard for his grandmother’s warnings and love of danger </label><br>
          <label><input type="radio" name="q5" value="correct"> It highlights his impulsive nature and curiosity overriding caution </label><br>
          <label><input type="radio" name="q5" value="incorrect"> It demonstrates his belief that magic was just a superstition </label><br>
          <label><input type="radio" name="q5" value="incorrect"> It reveals a subconscious desire to uncover family secrets </label><br>
        </div>

        <div class="question" id="question6">
          <h3>What is implied by the stone’s final words, “This is only the beginning,” after the lights go out?</h3>
          <label><input type="radio" name="q6" value="correct"> The stone’s curse has only started to reveal its true potential </label><br>
          <label><input type="radio" name="q6" value="incorrect"> The family’s secrets will continue to haunt them even without the stone </label><br>
          <label><input type="radio" name="q6" value="incorrect"> The stone is preparing to possess a new member of the family</label><br>
          <label><input type="radio" name="q6" value="incorrect"> The curse will now transfer to the entire town, not just Jake’s family </label><br>
        </div>

        <div class="question" id="question7">
          <h3>What might the stone’s ability to feed on secrets symbolize on a deeper thematic level?</h3>
          <label><input type="radio" name="q7" value="incorrect"> The corrupting influence of magic on human relationships </label><br>
          <label><input type="radio" name="q7" value="incorrect">The inevitability of secrets being revealed eventually </label><br>
          <label><input type="radio" name="q7" value="correct"> The destructive power of hidden truths when brought to light</label><br>
          <label><input type="radio" name="q7" value="incorrect"> The need for families to be completely honest with one another</label><br>
        </div>

        <div class="question" id="question8">
          <h3>How does the cold breeze and dimming light in the kitchen when Jake threw the stone into the pot serve as a metaphor?</h3>
          <label><input type="radio" name="q8" value="correct"> It symbolizes the creeping darkness that secrets can bring into one’s life  </label><br>
          <label><input type="radio" name="q8" value="incorrect"> It indicates that the stone’s power is tied to the element of air </label><br>
          <label><input type="radio" name="q8" value="incorrect"> It foreshadows the physical transformation of the characters</label><br>
          <label><input type="radio" name="q8" value="incorrect"> It suggests that the stone is drawing power from its surroundings </label><br>
        </div>

        <!-- Submit and Exit Buttons -->
        <div class="button-container">
          <button type="submit">Submit</button>
          <button id="exit">Exit</button>
        </div>
      </form>
      <div id="result"></div>
    </div>
 
       <!-- JavaScript -->

<!--WORKSHEET-->

<script>
  //turn off the camera
  webgazer.showVideoPreview(false) ;
</script>

<!-- Validate quiz -->
  <!-- Validate quiz -->
  <script src="js/quiz_validation.js"></script>


  <!-- UNITY SCRIPTS -->
  <script>
    var container = document.querySelector("#unity-container");
    var canvas = document.querySelector("#unity-canvas");
    var loadingBar = document.querySelector("#unity-loading-bar");
    var progressBarFull = document.querySelector("#unity-progress-bar-full");
    var warningBanner = document.querySelector("#unity-warning");



    var buildUrl = "BuildBasic";
      var loaderUrl = buildUrl + "/BVH.loader.js";
      var config = {
        dataUrl: buildUrl + "/BVH.data",
        frameworkUrl: buildUrl + "/BVH.framework.js",
        codeUrl: buildUrl + "/BVH.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "Attempt1",
        productVersion: "0.1",
      };

var script = document.createElement("script");
script.src = loaderUrl;
script.onload = () => {
  createUnityInstance(canvas, config, (progress) => {
    progressBarFull.style.width = 100 * progress + "%";
        }).then((unityInstance) => {
          loadingBar.style.display = "none";
        }).catch((message) => {
          alert(message);
        });
      };

document.body.appendChild(script);

  </script> 
  </body>
</html>
